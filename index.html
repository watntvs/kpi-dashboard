<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>📘 داشبورد شاخص‌های مدیریتی</title>
  <style>
    body {
      font-family: Vazirmatn, sans-serif;
      background-color: #f9f9f9;
      direction: rtl;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #007f00;
      margin-bottom: 30px;
    }
    details {
      margin-bottom: 10px;
      border: none;
      background: none;
    }
    summary {
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      padding: 4px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    ul {
      list-style: none;
      padding-right: 20px;
    }
    li {
      margin-bottom: 6px;
    }
    .subgroup-title {
      color: #007f00;
      margin-top: 10px;
      font-weight: bold;
    }
    .domain-icon {
      font-size: 20px;
    }
  </style>
</head>
<body>

<h1>📘 شاخص‌های معاونت مالی</h1>
<div id="dashboard"></div>

<script>
  const domainIcons = {
    "حسابداری مالی": "📊",
    "حسابداری مدیریت": "📈",
    "بودجه": "💰",
    "کنترل داخلی": "🛡️",
    "گزارشگری مالی": "📋",
    "منابع انسانی": "👥",
    "تولید": "🏭",
    "تدارکات": "📦",
    "انبار": "📦",
    "فروش": "🛒",
    "ارتباط با مشتری": "📞",
    "مدیریت دانش": "📚",
    "ساختار سازمانی": "🏢",
    "تحلیل مالی": "🔍",
    "مستندسازی فرآیندها": "📝",
    "کنترل کیفیت": "✅",
    "لجستیک و حمل‌ونقل": "🚚",
    "برنامه‌ریزی استراتژیک": "🎯"
  };

  fetch("data.json")
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById("dashboard");

      data.forEach(domain => {
        const details = document.createElement("details");
        const summary = document.createElement("summary");

        const icon = domainIcons[domain.domainTitle] || "📁";
        summary.innerHTML = `<span class="domain-icon">${icon}</span> ${domain.domainNumber}. ${domain.domainTitle}`;
        details.appendChild(summary);

        domain.subgroups.forEach(sub => {
          const subgroupTitle = document.createElement("div");
          subgroupTitle.className = "subgroup-title";
          subgroupTitle.textContent = sub.title;
          details.appendChild(subgroupTitle);

          sub.categories.forEach(cat => {
            const catItem = document.createElement("li");
            catItem.textContent = cat.title;

            const itemList = document.createElement("ul");
            cat.items.forEach(item => {
              const li = document.createElement("li");
              const a = document.createElement("a");
              a.href = `#${item.id}`;
              a.textContent = item.title;
              li.appendChild(a);
              itemList.appendChild(li);
            });

            const catWrapper = document.createElement("ul");
            catWrapper.appendChild(catItem);
            catWrapper.appendChild(itemList);
            details.appendChild(catWrapper);
          });
        });

        container.appendChild(details);
      });

      const allDetails = document.querySelectorAll("details");
      allDetails.forEach(detail => {
        detail.addEventListener("click", function () {
          allDetails.forEach(other => {
            if (other !== detail) {
              other.removeAttribute("open");
            }
          });
        });
      });
    })
    .catch(err => {
      document.getElementById("dashboard").innerHTML = "<p style='color:red;'>❌ خطا در بارگذاری داده‌ها. لطفاً مطمئن شوید فایل data.json در مسیر درست قرار دارد.</p>";
      console.error("خطا در بارگذاری JSON:", err);
    });
</script>

</body>
</html>

